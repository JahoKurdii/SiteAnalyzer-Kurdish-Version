<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site Analyzer | Kurdish Version</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./style/style.css">
</head>
<body class="bg-black flex min-h-screen items-center justify-center p-4 md:p-8">

    <div id="loading-overlay" class="loading-overlay">
        <img src="data:image/svg+xml,%3Csvg fill='%23FFFFFF' height='200px' width='200px' version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 512.002 512.002' xml:space='preserve'%3E%3Cg id='SVGRepo_bgCarrier' stroke-width='0'%3E%3C/g%3E%3Cg id='SVGRepo_tracerCarrier' stroke-linecap='round' stroke-linejoin='round'%3E%3C/g%3E%3Cg id='SVGRepo_iconCarrier'%3E%3Cg%3E%3Cg%3E%3Cpath d='M509.955,386.866l-39.524-72.29c-3.215-5.88-9.64-9.271-16.306-8.596l-64.9,6.525c0.002-0.351,0.013-0.701,0.013-1.053 c0-14.646-2.379-28.745-6.758-41.94l67.024-40.431l31.168,57.015c3.032,5.544,8.75,8.683,14.653,8.683 c2.705,0,5.446-0.659,7.987-2.047c8.084-4.42,11.055-14.555,6.636-22.639l-39.518-72.288c-2.182-3.989-5.898-6.916-10.287-8.103 c-4.387-1.184-9.073-0.528-12.967,1.821l-79.181,47.763c-7.099-10.999-15.771-20.889-25.693-29.357l91.956-92.45 c6.469-6.505,6.473-17.012,0.008-23.52l-88.375-88.97c-6.495-6.536-17.055-6.572-23.593-0.079 c-6.536,6.493-6.572,17.054-0.078,23.591l76.69,77.206l-85.114,85.572c-2.411-1.169-4.866-2.26-7.354-3.285 c10.006-11.673,16.071-26.817,16.071-43.361c0-36.793-29.934-66.727-66.727-66.727c-36.793,0-66.727,29.934-66.727,66.727 c0,16.543,6.065,31.688,16.071,43.361c-2.39,0.984-4.749,2.029-7.068,3.145l-84.975-85.432l76.69-77.206 c6.494-6.536,6.458-17.099-0.078-23.591c-6.538-6.493-17.099-6.458-23.593,0.079l-88.375,88.97 c-6.465,6.508-6.463,17.016,0.008,23.52l91.761,92.254c-9.962,8.464-18.673,18.359-25.803,29.369l-78.877-47.58 c-3.894-2.349-8.578-3.006-12.967-1.821c-4.39,1.186-8.105,4.113-10.287,8.103L2.048,270.092c-4.42,8.084-1.448,18.22,6.636,22.64 c2.54,1.389,5.283,2.047,7.987,2.047c5.902,0,11.622-3.14,14.653-8.683l31.168-57.015l66.668,40.217 c-4.425,13.257-6.827,27.429-6.827,42.155c0,0.338,0.01,0.673,0.012,1.011l-64.473-6.481c-6.665-0.671-13.091,2.716-16.306,8.596 L2.049,386.865c-4.42,8.084-1.448,18.22,6.636,22.639c2.54,1.389,5.283,2.047,7.987,2.047c5.902,0,11.622-3.14,14.653-8.683 l34.214-62.586l61.465,6.18c4.209,15.47,11.133,29.831,20.234,42.534l-59.951,29.862c-5.664,2.821-9.245,8.604-9.245,14.932 v61.467c0,9.213,7.469,16.682,16.682,16.682s16.682-7.469,16.682-16.682v-51.14L171,414.434 c23.071,19.028,52.619,30.472,84.789,30.472c32.238,0,61.842-11.492,84.934-30.591l59.834,29.803v51.14 c0,9.213,7.469,16.682,16.682,16.682s16.682-7.469,16.682-16.682V433.79c0-6.328-3.581-12.111-9.245-14.932l-60.234-30.002 c9.043-12.657,15.924-26.955,20.119-42.35l61.902-6.223l34.214,62.586c3.032,5.544,8.75,8.683,14.653,8.683 c2.705,0,5.446-0.659,7.987-2.047C511.403,405.086,514.373,394.95,509.955,386.866z M302.967,358.634 c-12.587,12.588-29.344,19.521-47.183,19.521s-34.595-6.933-47.184-19.521c-6.515-6.515-6.515-17.077,0-23.591 c6.514-6.515,17.077-6.515,23.591,0c6.287,6.287,14.667,9.75,23.593,9.75s17.305-3.462,23.591-9.749 c6.514-6.515,17.077-6.515,23.591,0C309.482,341.558,309.482,352.12,302.967,358.634z'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E"
             alt="Web-slinging..." class="loading-spinner w-24 h-24 mb-4">
        <p class="text-white text-xl ">.....شیکار یا دهێتە کرن</p>
    </div>

<div class="flex-grow w-full max-w-3xl shadow-lg bg-black rounded-lg border border-gray-800 transition-shadow duration-300 ease-in-out hover:shadow-xl">
        <div class="p-6 border-b border-gray-800">
<h1 class="text-2xl md:text-3x font-bold text-center text-white space-x-2">
  <span>Developed by</span>
<a href="https://jahokurdi.com" class="text-blue-400 no-underline">Jahd Gulli</a>
  <span class="text-gray-400">|</span>
  <span>شیکارکرنا مالپەری</span>
</h1>
        </div>
        <div class="p-6">
            <form method="POST" class="space-y-4" onsubmit="document.getElementById('loading-overlay').classList.add('active');">
                <div class="flex flex-col sm:flex-row gap-4">
                    <input
                        type="url"
                        name="url"
                        placeholder= "( https://example.com : وەک)مالپەرەکێ  داخل بکە"
                        class="flex-grow px-4 py-2 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400 bg-gray-950 text-white placeholder-gray-500 transition-all duration-200 ease-in-out"
                        required
                    />
                    <select
                        name="method"
                        class="px-4 py-2 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400 bg-gray-950 text-white transition-all duration-200 ease-in-out"
                    >
                        <option value="GET">GET</option>
                        <option value="POST">POST</option>
                    </select>
                    <button
                        type="submit"
                        name="submit"
                        class="px-6 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 border border-gray-700 transition-all duration-200 ease-in-out transform hover:scale-105 spider-button"
                    >
                        شیکارکرن
                    </button>
                </div>

                <?php
                include 'fetch_url_details.php';
                ?>

                <?php if(isset($_POST['submit'])): ?>
                <div class="space-y-6 mt-6 transition-all duration-300 ease-in-out">
                    <?php if ($error_message): ?>
                        <div class="text-red-400 font-medium text-center p-4 bg-red-950 rounded-lg border border-red-800 transition-all duration-300 ease-in-out">
                            <?php echo htmlspecialchars($error_message); ?>
                        </div>
                    <?php else: ?>
                        <!-- IP Information Section -->
                        <div dir="rtl" class=" bg-gray-950 p-4 rounded-lg border border-gray-800 transition-all duration-300 ease-in-out">
                            
                            <h2 class="text-xl jahdgulli mb-2 text-white">زانیاریێن سێرڤەری</h2>
                            <p class="text-gray-200"><strong>ئایپی سێرڤەری:</strong> <span class="jahdgulli text-gray-100"><?php echo htmlspecialchars($ip); ?></span></p>
                            <?php if ($data && $data['status'] === 'success'): ?>
                            <div dir="rtl" class="text-right">
                                <p class="text-gray-200"><strong>وەلات:</strong> <span class="text-gray-100"><?php echo htmlspecialchars($data['country']); ?></span></p>
                                <p class="text-gray-200"><strong>ناوچە:</strong> <span class="text-gray-100"><?php echo htmlspecialchars($data['regionName']); ?></span></p>
                                <p class="text-gray-200"><strong>باژێر:</strong> <span class="text-gray-100"><?php echo htmlspecialchars($data['city']); ?></span></p>
                                <p class="text-gray-200"><strong>کودێ پوستێ:</strong> <span class="text-gray-100"><?php echo htmlspecialchars($data['zip']); ?></span></p>
                                <p class="text-gray-200"><strong>دەمێ ناوچێ:</strong> <span class="text-gray-100"><?php echo htmlspecialchars($data['timezone']); ?></span></p>
                                <p class="text-gray-200"><strong>ئای ێس پی :</strong> <span class="text-gray-100"><?php echo htmlspecialchars($data['isp']); ?></span></p>
                                <p class="text-gray-200"><strong>سێرڤەر:</strong> <span class="text-gray-100"><?php echo htmlspecialchars($data['org']); ?></span></p>
                            </div>

                            <?php elseif ($data && $data['status'] === 'fail'): ?>
                                <p class="text-red-400">Error fetching IP details: <?php echo htmlspecialchars($data['message']); ?></p>
                            <?php else: ?>
                                <p class="text-gray-400">IP details not available.</p>
                            <?php endif; ?>
                        </div>

                        <!-- Headers Section -->
                        <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 transition-all duration-300 ease-in-out">
                            <h2 class="text-xl  mb-2 text-white">Response Headers:</h2>
                            <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 overflow-auto max-h-60 text-sm jahdgulli whitespace-pre-wrap text-gray-100">
                                <?php echo htmlspecialchars($headers ?? 'No headers received.'); ?>
                            </div>
                        </div>

                        <!-- HTTP Code and Header Size Section -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 transition-all duration-300 ease-in-out">
                                <h2 class="text-xl  mb-2 text-white">HTTP Code:</h2>
                                <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 text-lg font-bold text-gray-100">
                                    <?php echo htmlspecialchars($http_code ?? 'N/A'); ?>
                                </div>
                            </div>
                            <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 transition-all duration-300 ease-in-out">
                                <h2 class="text-xl  mb-2 text-white">Header Size:</h2>
                                <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 text-lg font-bold text-gray-100">
                                    <?php echo htmlspecialchars($header_size ? $header_size . ' bytes' : 'N/A'); ?>
                                </div>
                            </div>
                        </div>

                        <!-- Response Body Section -->
                        <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 transition-all duration-300 ease-in-out">
                            <h2 class="text-xl  mb-2 text-white">Response Body:</h2>
                            <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 overflow-auto max-h-60 text-sm font-mono whitespace-pre-wrap text-gray-100">
                                <?php echo htmlspecialchars($body ?: 'No response body received.'); ?>
                            </div>
                        </div>
                    <?php endif; ?>
                </div>
                <?php endif; ?>
            </form>
        </div>
    </div>

</body>

</html>